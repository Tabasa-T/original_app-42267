<h1><%= current_user.nickname %> さんのマイページ</h1>

<nav>
  <ul>
    <li><%= link_to 'プロフィール編集', edit_user_registration_path %></li>
    <li><%= link_to '新しい投稿を作成', new_post_path %></li>
    <li><%= link_to '一覧に戻る', posts_path %></li>
    <li><%= link_to 'ログアウト',  destroy_user_session_path, data: {turbo_method: :delete} %></li>
  </ul>
</nav>

<hr>

<h2>これまでの投稿</h2>

<% if @posts.any? %>
  <% @posts.each do |post| %>
    <div class="post">
      <% if post.image.attached? %>
        <%= image_tag post.image, style: "max-width: 200px;" %><br>
      <% end %>
      <strong>時間:</strong> <%= post.duration %> 分<br>
      <strong>成果:</strong> <%= post.result %><br>
      <%= link_to '詳細を見る', post_path(post) %>
      <hr>
    </div>
  <% end %>
<% else %>
  <p>まだ投稿がありません</p>
<% end %>


<% if @posts.any? %>
  <p>これまでに投資した時間：<%= @total_duration %>分</p>
<% else %>
  <p>これまでに投資した時間：0分</p>
<% end %>